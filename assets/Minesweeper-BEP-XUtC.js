import{r as d,j as r}from"./motion-3Unlpoja.js";import"./vendor-_uqhELNW.js";const _=()=>{const[n,g]=d.useState({board:[],gameStatus:"playing",mineCount:60,flagCount:0,startTime:0,elapsedTime:0}),v=d.useCallback(()=>{const e=[];for(let i=0;i<20;i++){e[i]=[];for(let a=0;a<20;a++)e[i][a]={row:i,col:a,isMine:!1,isRevealed:!1,isFlagged:!1,neighborMines:0}}let s=0;for(;s<60;){const i=Math.floor(Math.random()*20),a=Math.floor(Math.random()*20);e[i][a].isMine||(e[i][a].isMine=!0,s++)}for(let i=0;i<20;i++)for(let a=0;a<20;a++)if(!e[i][a].isMine){let o=0;for(let f=-1;f<=1;f++)for(let t=-1;t<=1;t++){const l=i+f,u=a+t;l>=0&&l<20&&u>=0&&u<20&&e[l][u].isMine&&o++}e[i][a].neighborMines=o}return e},[]),h=d.useCallback(()=>{const e=v();g({board:e,gameStatus:"playing",mineCount:60,flagCount:0,startTime:Date.now(),elapsedTime:0})},[v]);d.useEffect(()=>{h()},[h]),d.useEffect(()=>{if(n.gameStatus==="playing"&&n.startTime>0){const e=setInterval(()=>{g(s=>({...s,elapsedTime:Math.floor((Date.now()-s.startTime)/1e3)}))},1e3);return()=>clearInterval(e)}},[n.gameStatus,n.startTime]);const b=d.useCallback((e,s)=>{if(n.gameStatus!=="playing")return;const i=n.board[e][s];if(i.isRevealed||i.isFlagged)return;const a=n.board.map(t=>t.map(l=>({...l})));if(i.isMine){a[e][s].isRevealed=!0;for(let t=0;t<20;t++)for(let l=0;l<20;l++)a[t][l].isMine&&(a[t][l].isRevealed=!0);g(t=>({...t,board:a,gameStatus:"lost"}));return}if(a[e][s].isRevealed=!0,i.neighborMines===0){const t=[{row:e,col:s}];for(;t.length>0;){const{row:l,col:u}=t.shift();for(let p=-1;p<=1;p++)for(let S=-1;S<=1;S++){const m=l+p,c=u+S;m>=0&&m<20&&c>=0&&c<20&&!a[m][c].isRevealed&&!a[m][c].isFlagged&&(a[m][c].isRevealed=!0,a[m][c].neighborMines===0&&t.push({row:m,col:c}))}}}const o=20*20;if(a.flat().filter(t=>t.isRevealed).length===o-60){g(t=>({...t,board:a,gameStatus:"won"}));return}g(t=>({...t,board:a}))},[n.board,n.gameStatus]),C=d.useCallback((e,s,i)=>{if(i.preventDefault(),n.gameStatus!=="playing"||n.board[e][s].isRevealed)return;const o=n.board.map(t=>t.map(l=>({...l})));o[e][s].isFlagged=!o[e][s].isFlagged;const f=o.flat().filter(t=>t.isFlagged).length;g(t=>({...t,board:o,flagCount:f}))},[n.board,n.gameStatus]),M=e=>e.isFlagged?"ðŸš©":e.isRevealed?e.isMine?"ðŸ’£":e.neighborMines===0?"":e.neighborMines:"",R=e=>{let s="minesweeper-cell";return e.isRevealed?(s+=" revealed",e.isMine?s+=" mine":e.neighborMines>0?s+=` number-${e.neighborMines}`:s+=" empty"):(s+=" hidden",e.isFlagged&&(s+=" flagged")),s},N=e=>{const s=Math.floor(e/60),i=e%60;return`${s.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`};return r.jsxs("div",{className:"minesweeper-container",children:[r.jsxs("div",{className:"minesweeper-header",children:[r.jsxs("div",{className:"game-info",children:[r.jsxs("div",{className:"info-item",children:[r.jsx("span",{className:"info-label",children:"Mines:"}),r.jsx("span",{className:"info-value",children:n.mineCount-n.flagCount})]}),r.jsxs("div",{className:"info-item",children:[r.jsx("span",{className:"info-label",children:"Time:"}),r.jsx("span",{className:"info-value",children:N(n.elapsedTime)})]})]}),r.jsx("div",{className:"game-status",children:r.jsx("button",{className:"new-game-btn",onClick:h,children:n.gameStatus==="playing"?"ðŸ˜Š":n.gameStatus==="won"?"ðŸ˜Ž":"ðŸ˜µ"})})]}),r.jsx("div",{className:"minesweeper-board",children:n.board.map((e,s)=>r.jsx("div",{className:"minesweeper-row",children:e.map((i,a)=>r.jsx("div",{className:R(i),onClick:()=>b(s,a),onContextMenu:o=>C(s,a,o),children:M(i)},`${s}-${a}`))},s))}),r.jsxs("div",{className:"minesweeper-footer",children:[n.gameStatus==="won"&&r.jsx("div",{className:"game-message win",children:"ðŸŽ‰ Congratulations! You won! ðŸŽ‰"}),n.gameStatus==="lost"&&r.jsx("div",{className:"game-message lose",children:"ðŸ’¥ Game Over! Try again! ðŸ’¥"}),r.jsx("div",{className:"game-instructions",children:r.jsx("p",{children:"Left click to reveal â€¢ Right click to flag â€¢ Click ðŸ˜Š to restart"})})]})]})};export{_ as default};
//# sourceMappingURL=Minesweeper-BEP-XUtC.js.map
