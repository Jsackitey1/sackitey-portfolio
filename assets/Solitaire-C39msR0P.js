const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/solitaireSolver-D0HvkEgp.js","assets/index-Do4ognXd.js","assets/motion-3Unlpoja.js","assets/vendor-_uqhELNW.js","assets/index-Bt2VEDv3.css"])))=>i.map(i=>d[i]);
import{_ as Y}from"./index-Do4ognXd.js";import{r as m,j as l}from"./motion-3Unlpoja.js";const I=["hearts","diamonds","clubs","spades"],G=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],y=n=>G.indexOf(n)+1,P=n=>n==="hearts"||n==="diamonds"?"red":"black",E=n=>{switch(n){case"hearts":return"♥";case"diamonds":return"♦";case"clubs":return"♣";case"spades":return"♠"}},q=()=>{const[n,p]=m.useState({stock:[],waste:[],foundations:{hearts:[],diamonds:[],clubs:[],spades:[]},tableau:[],score:0,moves:0,status:"playing"}),[d,u]=m.useState(null),[b,v]=m.useState([]),[w,k]=m.useState([]),[V,U]=m.useState(!1),j=m.useCallback(async()=>{U(!0),setTimeout(async()=>{const t=()=>{const c=[];return I.forEach(f=>{G.forEach(g=>{c.push({id:`${g}-${f}`,suit:f,rank:g,color:P(f),faceUp:!1})})}),c};let e=[],s=!1,a=0;const r=5,i=c=>{for(let f=c.length-1;f>0;f--){const g=Math.floor(Math.random()*(f+1));[c[f],c[g]]=[c[g],c[f]]}return c},{isSolvable:o}=await Y(async()=>{const{isSolvable:c}=await import("./solitaireSolver-D0HvkEgp.js");return{isSolvable:c}},__vite__mapDeps([0,1,2,3,4]));for(;!s&&a<r;){const c=i(t());o(c)?(e=c,s=!0):e=c,a++}const h=e,x=Array(7).fill([]).map(()=>[]);let N=0;for(let c=0;c<7;c++)for(let f=0;f<=c;f++){const g={...h[N],faceUp:f===c};x[c].push(g),N++}const $=h.slice(N).map(c=>({...c,faceUp:!1}));p({stock:$,waste:[],foundations:{hearts:[],diamonds:[],clubs:[],spades:[]},tableau:x,score:0,moves:0,status:"playing"}),v([]),k([]),u(null),U(!1)},50)},[]);m.useEffect(()=>{j()},[j]);const S=()=>{v(t=>[...t,n]),k([])},M=()=>{if(b.length===0)return;const t=b[b.length-1];k(e=>[...e,n]),p(t),v(e=>e.slice(0,-1)),u(null)},C=()=>{if(w.length===0)return;const t=w[w.length-1];v(e=>[...e,n]),p(t),k(e=>e.slice(0,-1)),u(null)};m.useEffect(()=>{const t=e=>{(e.metaKey||e.ctrlKey)&&e.key.toLowerCase()==="z"?e.shiftKey?C():M():(e.metaKey||e.ctrlKey)&&e.key.toLowerCase()==="y"&&C()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[b,w,n]);const D=(t,e)=>{const s=n.foundations[e];if(t.suit!==e)return!1;if(s.length===0)return t.rank==="A";const a=s[s.length-1];return y(t.rank)===y(a.rank)+1},W=(t,e)=>{const s=n.tableau[e];if(s.length===0)return t.rank==="K";const a=s[s.length-1];return a.faceUp&&a.color!==t.color&&y(a.rank)===y(t.rank)+1},z=()=>{if(S(),n.stock.length===0){if(n.waste.length===0)return;const t=[...n.waste].reverse().map(e=>({...e,faceUp:!1}));p(e=>({...e,stock:t,waste:[],moves:e.moves+1}))}else{const t={...n.stock[0],faceUp:!0};p(e=>({...e,stock:e.stock.slice(1),waste:[...e.waste,t],moves:e.moves+1}))}u(null)},F=(t,e)=>{if(t.faceUp)if(d){if(d.card.id===t.id){u(null);return}if(e.pile.startsWith("tableau")){const s=parseInt(e.pile.split("-")[1]),a=n.tableau[s];a[a.length-1].id===t.id?A(s):u({...e,card:t})}else u({...e,card:t})}else e.pile==="waste"?e.index===n.waste.length-1&&u({...e,card:t}):e.pile.startsWith("tableau")?u({...e,card:t}):e.pile.startsWith("foundation")&&u({...e,card:t})},L=(t,e)=>{for(const s of I)if(D(t,s)){u({card:t,...e}),_(e,s);return}},_=(t,e)=>{S(),p(s=>{const a={...s,tableau:s.tableau.map(o=>[...o]),foundations:{...s.foundations,[e]:[...s.foundations[e]]},waste:[...s.waste],stock:[...s.stock]};let r=[];if(t.pile==="waste")r=[a.waste.pop()];else if(t.pile.startsWith("tableau")){const o=parseInt(t.pile.split("-")[1]),h=a.tableau[o];r=h.splice(t.index),h.length>0&&!h[h.length-1].faceUp&&(h[h.length-1].faceUp=!0,a.score+=5)}return a.foundations[e].push(r[0]),a.score+=10,a.moves+=1,Object.values(a.foundations).reduce((o,h)=>o+h.length,0)===52&&(a.status="won"),a}),u(null)},R=t=>{d&&A(t)},J=t=>{if(d){const e=d.pile;let s=[];if(e==="waste")s=[d.card];else if(e.startsWith("tableau")){const a=parseInt(e.split("-")[1]),r=n.tableau[a];d.index===r.length-1&&(s=[d.card])}if(s.length===1){const a=s[0];D(a,t)&&O(t)}}},O=t=>{d&&(S(),p(e=>{const s={...e,tableau:e.tableau.map(i=>[...i]),foundations:{hearts:[...e.foundations.hearts],diamonds:[...e.foundations.diamonds],clubs:[...e.foundations.clubs],spades:[...e.foundations.spades]},waste:[...e.waste],stock:[...e.stock]};let a=[];if(d.pile==="waste")a=[s.waste.pop()];else if(d.pile.startsWith("foundation")){const i=d.pile.split("-")[1];a=[s.foundations[i].pop()]}else if(d.pile.startsWith("tableau")){const i=parseInt(d.pile.split("-")[1]),o=s.tableau[i];a=o.splice(d.index),o.length>0&&!o[o.length-1].faceUp&&(o[o.length-1].faceUp=!0,s.score+=5)}if(typeof t=="string"){const i=t;s.foundations[i].push(a[0]),s.score+=10}else s.tableau[t].push(...a),s.score+=5;return s.moves+=1,Object.values(s.foundations).reduce((i,o)=>i+o.length,0)===52&&(s.status="won"),s}),u(null))},A=t=>{if(!d)return;const e=d.card;W(e,t)?O(t):u(null)},Q=(t,e)=>{t.dataTransfer.setData("source",JSON.stringify(e)),t.dataTransfer.effectAllowed="move"},H=t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"},K=(t,e)=>{t.preventDefault();const s=t.dataTransfer.getData("source");if(!s)return;const a=JSON.parse(s);let r;if(a.pile==="waste"){if(n.waste.length===0)return;r=n.waste[n.waste.length-1]}else if(a.pile.startsWith("tableau")){const i=parseInt(a.pile.split("-")[1]);r=n.tableau[i][a.index]}else if(a.pile.startsWith("foundation")){const i=a.pile.split("-")[1];r=n.foundations[i][n.foundations[i].length-1]}else return;if(typeof e=="string"){const i=e;if(a.pile.startsWith("tableau")){const o=parseInt(a.pile.split("-")[1]);if(a.index!==n.tableau[o].length-1)return}D(r,i)&&_(a,i)}else W(r,e)&&X(a,e)},X=(t,e)=>{S(),p(s=>{const a={...s,tableau:s.tableau.map(i=>[...i]),foundations:{...s.foundations},waste:[...s.waste],stock:[...s.stock]};let r=[];if(t.pile==="waste")r=[a.waste.pop()];else if(t.pile.startsWith("foundation")){const i=t.pile.split("-")[1];r=[a.foundations[i].pop()]}else if(t.pile.startsWith("tableau")){const i=parseInt(t.pile.split("-")[1]),o=a.tableau[i];r=o.splice(t.index),o.length>0&&!o[o.length-1].faceUp&&(o[o.length-1].faceUp=!0,a.score+=5)}return a.tableau[e].push(...r),a.score+=5,a.moves+=1,a})},T=(t,e,s,a=1)=>{const r=(d==null?void 0:d.card.id)===t.id;let i={};if(e.startsWith("tableau")){let x=3.5;(a-1)*x+18>55&&(x=37/(a-1)),i={top:`${s*x}vh`}}return l.jsxs("div",{className:`card face-up ${t.color} ${r?"selected":""}`,style:i,draggable:!0,onDragStart:o=>Q(o,{pile:e,index:s}),onClick:o=>{o.stopPropagation(),F(t,{pile:e,index:s})},onDoubleClick:o=>{o.stopPropagation(),L(t,{pile:e,index:s})},children:[l.jsxs("div",{className:"card-top",children:[l.jsx("span",{className:"card-value",children:t.rank}),l.jsx("span",{className:"card-suit",children:E(t.suit)})]}),l.jsx("div",{className:"card-center",children:E(t.suit)})]},t.id)};return l.jsxs("div",{className:"solitaire-wrapper",children:[l.jsxs("div",{className:"solitaire-header-controls",children:[l.jsx("h1",{className:"solitaire-title",children:"Classic Solitaire"}),l.jsxs("div",{className:"game-stats-row",children:[l.jsxs("div",{className:"stat-box",children:["Score: ",n.score]}),l.jsxs("div",{className:"stat-box",children:["Moves: ",n.moves]}),l.jsx("button",{className:"new-game-btn",onClick:M,disabled:b.length===0,style:{opacity:b.length===0?.5:1},children:"Undo"}),l.jsx("button",{className:"new-game-btn",onClick:C,disabled:w.length===0,style:{opacity:w.length===0?.5:1},children:"Redo"}),l.jsx("button",{className:"new-game-btn",onClick:j,children:"New Game"})]})]}),l.jsxs("div",{className:"solitaire-container",children:[V&&l.jsxs("div",{className:"win-message",style:{zIndex:3e3},children:[l.jsx("h2",{children:"Dealing..."}),l.jsx("p",{children:"Finding a winnable hand"})]}),l.jsxs("div",{className:"solitaire-board",children:[l.jsxs("div",{className:"top-section",children:[l.jsxs("div",{className:"deck-area",children:[l.jsx("div",{className:"card-pile",onClick:z,children:n.stock.length>0?l.jsx("div",{className:"card card-back"}):l.jsx("div",{className:"card-placeholder",children:"↺"})}),l.jsx("div",{className:"card-pile",children:n.waste.length>0&&T(n.waste[n.waste.length-1],"waste",n.waste.length-1)})]}),l.jsx("div",{className:"foundation-area",children:I.map(t=>l.jsxs("div",{className:"card-pile",onClick:()=>J(t),onDragOver:H,onDrop:e=>K(e,t),children:[l.jsx("div",{className:"card-placeholder",style:{color:P(t)==="red"?"#ffcccc":"#e0e0e0"},children:E(t)}),n.foundations[t].map((e,s)=>l.jsx("div",{className:"card-stack-item",children:T(e,`foundation-${t}`,s)},e.id))]},t))})]}),l.jsx("div",{className:"tableau-area",children:n.tableau.map((t,e)=>l.jsx("div",{className:"tableau-column",onClick:()=>R(e),onDragOver:H,onDrop:s=>K(s,e),children:t.map((s,a)=>s.faceUp?T(s,`tableau-${e}`,a,t.length):l.jsx("div",{className:"card card-back",style:{top:`${a*2}vh`,position:"absolute"}},s.id))},e))})]}),n.status==="won"&&l.jsxs("div",{className:"win-message",children:[l.jsx("h2",{children:"Congratulations!"}),l.jsx("p",{children:"You won!"}),l.jsx("button",{className:"new-game-btn",onClick:j,children:"Play Again"})]})]})]})},ee=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{I as S,ee as a,y as g};
//# sourceMappingURL=Solitaire-C39msR0P.js.map
